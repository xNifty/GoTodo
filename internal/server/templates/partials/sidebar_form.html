<form
    hx-post="{{if .FormAction}}{{.FormAction}}{{else}}{{basePath}}/api/add-task{{end}}"
    hx-include="#newTaskForm"
    method="post"
    id="newTaskForm"
    enctype="multipart/form-data"
    hx-target="#task-container"
    hx-swap="innerHTML"
    >
    <div class="form-group">
        <label for="title">Title:</label>
        <input
            type="text"
            id="title"
            name="title"
            class="form-control"
            required
            value="{{.FormTitle}}"
            placeholder="Your Task Title"
        />
    </div>
    <div class="form-group">
        <label for="description">Description:</label>
        <textarea
            id="description"
            name="description"
            class="form-control"
            maxlength="100"
        >{{.Description}}</textarea>
        <div class="d-flex justify-content-between align-items-center mt-1">
            <small class="form-hint">Max 100 Characters</small>
            <small class="text-muted"><span id="char-count">{{if .Description}}{{len .Description}}{{else}}0{{end}}</span>/100</small>
        </div>
        {{if .Error}}
        <div id="description-error" class="invalid-feedback d-block">{{.Error}}</div>
        {{else}}
        <div id="description-error" class="invalid-feedback d-block"></div>
        {{end}}
    </div>
    <div class="form-group mt-2">
        <label for="project_id">Project (optional):</label>
        <select id="project_id" name="project_id" class="form-select">
            <option value="">No project</option>
            {{range .Projects}}
            <option value="{{.ID}}" {{if .Selected}}selected{{end}}>{{.Name}}</option>
            {{end}}
        </select>
    </div>
    {{if .ID}}
    <input type="hidden" name="id" value="{{.ID}}" />
    {{end}}
    <input type="hidden" name="currentPage" value="{{.CurrentPage}}" />
    <input type="hidden" name="project" value="{{.ProjectFilter}}" />
    <button type="submit" class="btn btn-primary w-100 mt-3">
        {{if .SubmitText}}{{.SubmitText}}{{else}}Add Task{{end}}
    </button>
</form> 