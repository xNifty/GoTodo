<!doctype html>
<html lang="en" {{if .Theme}}data-theme="{{.Theme}}"{{end}}>
    <head>
        <script nonce="{{.CSPNonce}}">
            (function () {
                try {
                    if (!document.documentElement.getAttribute('data-theme')) {
                        var theme = localStorage.getItem('theme');
                        if (theme) document.documentElement.setAttribute('data-theme', theme);
                    }
                } catch (e) {}
            })();
        </script>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        {{if .MetaDescription}}<meta name="description" content="{{.MetaDescription}}" />{{end}}
        <title>{{.Title}}</title>
        <link rel="stylesheet" href="{{basePath}}/public/vendor/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="{{basePath}}/public/css/{{if .UseMinifiedAssets}}site.min.css{{else}}site.css{{end}}?v={{.AssetVersion}}" />
        <link rel="stylesheet" href="{{basePath}}/public/vendor/bootstrap-icons/bootstrap-icons.css" />
    </head>
    <body>
        {{template "navbar.html" .}}
        
        <div class="container mt-4">
          <h1>Change Log</h1>
          {{if .Entries}}
            {{range $i, $e := .Entries}}
              <div class="card mb-3">
                <div class="card-body">
                  <button type="button" class="btn btn-link text-start w-100 p-0 d-flex align-items-center" data-bs-toggle="collapse" data-bs-target="#changelog-{{$i}}" aria-expanded="false" aria-controls="changelog-{{$i}}">
                    <span class="chev me-2">►</span>
                    <div class="flex-grow-1 text-start"><strong>{{$e.Version}} — {{$e.Title}}</strong>
                      <span class="badge releasetag ms-3 {{if $e.Prerelease}}bg-warning text-dark{{else}}bg-success{{end}}">{{if $e.Prerelease}}Prerelease{{else}}Release{{end}} • {{$e.Date}}</span>
                    </div>
                  </button>
                  <div id="changelog-{{$i}}" class="collapse mt-2">
                    {{if $e.Html}}
                      {{safeHTML $e.Html}}
                    {{else if $e.Notes}}
                      <ul>
                      {{range $e.Notes}}
                        <li>{{.}}</li>
                      {{end}}
                      </ul>
                    {{end}}
                  </div>
                </div>
              </div>
            {{end}}
          {{else}}
            <div class="text-muted">No changelog entries available.</div>
          {{end}}
        </div>

        <script nonce="{{.CSPNonce}}" src="{{basePath}}/public/vendor/bootstrap/js/bootstrap.bundle.min.js" defer></script>
        <script nonce="{{.CSPNonce}}" src="{{basePath}}/public/js/{{if .UseMinifiedAssets}}site.min.js{{else}}site.js{{end}}?v={{.AssetVersion}}" defer></script>
    </body>
</html>
